\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hymnbook}[2025/04/19 Hymn book styling with two columns]

\RequirePackage{titlesec}
\RequirePackage{parskip}
\RequirePackage{xcolor}
\RequirePackage{etoolbox}
\RequirePackage{lmodern}
\RequirePackage{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{multicol}

% Page setup
\geometry{margin=1in}
\pagestyle{fancy}
\fancyhf{}
\rhead{\thepage}
\renewcommand{\headrulewidth}{0pt}

% Two-column environment starts after TOC
\AtBeginDocument{%
  \twocolumn
}

% Hymn title
\newcommand{\HymnTitle}[2][]{%
  \section*{\centering\bfseries\LARGE #2%
    \ifstrempty{#1}{}{\\\large #1}}%
  \addcontentsline{toc}{section}{#2}%
  \markboth{#2}{#2}%
}

% Stanza formatting
\newcounter{stanza}
\newenvironment{stanza}{%
  \refstepcounter{stanza}%
  \noindent\textbf{\thestanza.}~
  \begin{minipage}[t]{\dimexpr\linewidth-2em}%
  \raggedright
}{%
  \end{minipage}\par\vspace{1em}%
}

% Chorus formatting
\newenvironment{chorus}{%
  \vspace{0.5em}%
  \noindent\textit{Chorus:}%
  \begin{quote}\itshape
}{%
  \end{quote}%
}

% Page break between hymns
\newcommand{\HymnBreak}{\newpage}
