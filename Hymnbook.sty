\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{hymnbook}[2025/04/19 First verse directly under title]

\RequirePackage{titlesec}
\RequirePackage{parskip}
\RequirePackage{xcolor}
\RequirePackage{etoolbox}
\RequirePackage{lmodern}
\RequirePackage{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{multicol}

% Page setup
\geometry{margin=1in}
\pagestyle{fancy}
\fancyhf{}
\rhead{\thepage}
\renewcommand{\headrulewidth}{0pt}

% Set up two-column layout
\AtBeginDocument{%
  \setlength{\columnsep}{1em}     % Set the space between columns
  \setlength{\columnseprule}{0.4pt} % Thickness of the dividing line
  \begin{multicols}{2}
}

% Close columns at end of document
\AtEndDocument{%
  \end{multicols}
}

% Left-aligned title with same size as verse text (no large font)
\newcommand{\HymnTitleWithNumber}[2]{%
  \vspace{0em} % Reduced space after title to bring first verse closer
  {\bfseries #1~#2\par}%
  \addcontentsline{toc}{section}{#1~#2}%
  \markboth{#2}{#2}%
}

% Vertically stretched hymn number before first line
\newcommand{\HymnNumberBeforeFirstVerse}[1]{%
  \raisebox{-0.3ex}{\parbox[c][2\baselineskip][c]{1.5em}{\centering\Huge\bfseries #1}}%
  \hspace{0.5em}%
}

% Stanza environment
\newenvironment{stanza}{%
  \noindent
  \begin{minipage}[t]{\linewidth}%
  \raggedright
}{%
  \end{minipage}\par\vspace{1em}%
}

% Chorus formatting
\newenvironment{chorus}{%
  \vspace{0.5em}%
  \noindent\textit{Chorus:}%
  \begin{quote}\itshape
}{%
  \end{quote}%
}

% Page break between hymns
\newcommand{\HymnBreak}{\columnbreak}
